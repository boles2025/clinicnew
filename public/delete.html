<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>خيارات الحذف - عيادة التغذية</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Tajawal', sans-serif; background-color: #f8f2f2; padding-top: 80px; }
        .glass-card { background: rgba(255, 255, 255, 0.6); border-radius: 16px; box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); border: 1px solid rgba(255, 255, 255, 0.3); }
        .card-header-custom { background: linear-gradient(135deg, #6c757d, #343a40); color: white; }
        .warning-header { background: linear-gradient(135deg, #d32f2f, #b71c1c); }
        .patients-search-list { max-height: 200px; overflow-y: auto; border: 1px solid #ddd; border-radius: 8px; }
        .patients-search-list .list-group-item { cursor: pointer; }
        .patients-search-list .list-group-item.active { background-color: #dc3545; border-color: #dc3545; }
        .nuclear-card .btn { transition: background-color 0.3s, color 0.3s; }
    </style>
</head>
<body class="delete-page">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="home.html">عيادة التغذية</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link active" href="index.html"><i class="fas fa-home"></i> الرئيسية</a></li>
                    <li class="nav-item"><a class="nav-link" href="patients_register.html"><i class="fas fa-user-plus"></i> تسجيل مريض</a></li>
                    <li class="nav-item"><a class="nav-link" href="visits.html"><i class="fas fa-calendar-check"></i> المتابعات</a></li>
                    <li class="nav-item"><a class="nav-link" href="revenues.html"><i class="fas fa-money-bill-wave"></i> الإيرادات</a></li>
                    <li class="nav-item"><a class="nav-link" href="reports.html"><i class="fas fa-chart-bar"></i> التقارير</a></li>
                    <li class="nav-item"><a class="nav-link" href="calendar.html"><i class="fas fa-calendar-alt"></i> بحث بالتاريخ</a></li>
                    <li class="nav-item"><a class="nav-link" href="backup.html"><i class="fas fa-database"></i> النسخ الاحتياطي</a></li>
                    
                </ul>
             
            </div>
        </div>
    </nav>

    <div class="container-fluid mt-4">
        <div class="alert alert-danger p-3 animate__animated animate__shakeX">
            <h4 class="alert-heading mb-0"><i class="fas fa-exclamation-triangle"></i> تحذير: جميع عمليات الحذف في هذه الصفحة نهائية ولا يمكن التراجع عنها.</h4>
        </div>

        <div class="row g-4">
            <!-- Delete Patient -->
            <div class="col-lg-4"><div class="card glass-card h-100"><div class="card-header card-header-custom"><h5><i class="fas fa-user-slash"></i> حذف مريض</h5></div><div class="card-body"><p class="small text-muted">سيتم حذف المريض وجميع بياناته المتعلقة (الزيارات والإيرادات).</p><input type="text" class="form-control mb-2" id="patientSearch" placeholder="ابحث بالاسم..."><div class="patients-search-list"><ul class="list-group" id="patient-list"></ul></div><div class="d-grid mt-3"><button class="btn btn-danger" id="deletePatientBtn" disabled><i class="fas fa-trash-alt"></i> حذف المريض المحدد</button></div></div></div></div>
            <!-- Delete Visits -->
            <div class="col-lg-4"><div class="card glass-card h-100"><div class="card-header card-header-custom"><h5><i class="fas fa-calendar-times"></i> حذف زيارات لمريض</h5></div><div class="card-body"><p class="small text-muted">اختر مريضًا ثم حدد فترة لحذف زياراته.</p><input type="text" class="form-control mb-2" id="visitsPatientSearch" placeholder="ابحث بالاسم..."><div class="patients-search-list"><ul class="list-group" id="visits-patient-list"></ul></div><select id="visitsDateRange" class="form-select mt-2"><option value="all">كل الزيارات</option><option value="custom">فترة مخصصة</option></select><div class="d-grid mt-3"><button class="btn btn-danger" id="deleteVisitsBtn" disabled><i class="fas fa-trash-alt"></i> حذف الزيارات المحددة</button></div></div></div></div>
            <!-- Delete Revenues -->
            <div class="col-lg-4"><div class="card glass-card h-100"><div class="card-header card-header-custom"><h5><i class="fas fa-file-invoice-dollar"></i> حذف إيرادات لمريض</h5></div><div class="card-body"><p class="small text-muted">اختر مريضًا ثم حدد فترة لحذف إيراداته.</p><input type="text" class="form-control mb-2" id="revenuesPatientSearch" placeholder="ابحث بالاسم..."><div class="patients-search-list"><ul class="list-group" id="revenues-patient-list"></ul></div><select id="revenuesDateRange" class="form-select mt-2"><option value="all">كل الإيرادات</option><option value="custom">فترة مخصصة</option></select><div class="d-grid mt-3"><button class="btn btn-danger" id="deleteRevenuesBtn" disabled><i class="fas fa-trash-alt"></i> حذف الإيرادات المحددة</button></div></div></div></div>
        </div>
        
        <!-- Nuclear Options -->
        <div class="card glass-card mt-4 animate__animated animate__fadeInUp"><div class="card-header warning-header"><h5><i class="fas fa-radiation"></i> خيارات الحذف الشامل (خطير جدًا)</h5></div><div class="card-body text-center"><p class="mb-3">استخدم هذه الأزرار فقط عند الحاجة القصوى. كل زر سيحذف جميع البيانات من نوعه لكل المرضى.</p><div class="btn-group" role="group"><button class="btn btn-outline-danger" id="deleteAllVisitsBtn"><i class="fas fa-calendar-times"></i> حذف كل الزيارات</button><button class="btn btn-outline-danger" id="deleteAllRevenuesBtn"><i class="fas fa-file-invoice-dollar"></i> حذف كل الإيرادات</button><button class="btn btn-danger" id="deleteAllDataBtn"><i class="fas fa-bomb"></i> حذف كل بيانات العيادة</button></div></div></div>
    </div>
    
    <!-- Password Confirmation Modal -->
    <div class="modal fade" id="passwordModal" tabindex="-1">
        <div class="modal-dialog modal-sm modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header"><h5 class="modal-title">تأكيد العملية</h5></div>
                <div class="modal-body">
                    <p>الرجاء إدخال كلمة المرور لتأكيد الحذف.</p>
                    <input type="password" id="passwordInput" class="form-control" placeholder="كلمة المرور">
                    <div id="passwordError" class="text-danger small mt-1 d-none">كلمة المرور غير صحيحة.</div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">تأكيد الحذف</button>
                </div>
            </div>
        </div>
    </div>
    
    <div id="toast-container" style="position: fixed; bottom: 20px; left: 20px; z-index: 1056;"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="js/delete.js"></script>
</body>
</html>